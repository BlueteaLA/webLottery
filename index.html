<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=0;" />
	<title>lottery</title>
	<link rel="stylesheet" type="text/css" href="css/style.css" />
	<link rel="stylesheet" type="text/css" href="css/stylelb.css" />
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/scroll.js"></script>
	<script src="js/rem.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			$('.list_lh li:even').addClass('lieven');
		})
		$(function(){
			$("div.list_lh").myScroll({
				speed:40, //数值越大，速度越慢
				rowHeight:68 //li的高度
			});
	});
	</script>
</head>
<body class="keBody">
	<div class="kePublic">
		<!--效果html开始-->
		<div id="lottery">
			<table border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td class="lottery-unit lottery-unit-0"><img src="img/1.png"></td>
					<td class="lottery-unit lottery-unit-1"><img src="img/2.png"></td>
					<td class="lottery-unit lottery-unit-2"><img src="img/4.png"></td>
		            <td class="lottery-unit lottery-unit-3"><img src="img/3.png"></td>
				</tr>
				<tr>
					<td class="lottery-unit lottery-unit-11"><img src="img/7.png"></td>
					<td colspan="2" rowspan="2"><a href="#"></a></td>
					<td class="lottery-unit lottery-unit-4"><img src="img/5.png"></td>
				</tr>
				<tr>
					<td class="lottery-unit lottery-unit-10"><img src="img/1.png"></td>
					<td class="lottery-unit lottery-unit-5"><img src="img/6.png"></td>
				</tr>
		        <tr>
					<td class="lottery-unit lottery-unit-9"><img src="img/3.png"></td>
					<td class="lottery-unit lottery-unit-8"><img src="img/6.png"></td>
					<td class="lottery-unit lottery-unit-7"><img src="img/8.png"></td>
		            <td class="lottery-unit lottery-unit-6"><img src="img/7.png"></td>
				</tr>
			</table>
		</div>
		<!--效果html结束-->
		<div class="clear"></div>
	</div>
	<div class="bcon">
		<!-- 代码开始 -->
		<div class="list_lh">
			<ul>
				<li>
					<p><a href="" target="_blank">1000000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">2000000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">3000000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">4000000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">5000000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">6000000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">7000000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">8000000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">9000000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">1000000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">1100000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
				<li>
					<p><a href="" target="_blank">1200000</a><a href="" target="_blank" class="btn_lh">领号</a><em>获得</em></p>
					<p><a href="" target="_blank" class="a_blue">网游战江湖公测豪华礼包</a><span>17:28:05</span></p>
				</li>
			</ul>
		</div>
		<!-- 代码结束 -->
	</div>
	<div class="alertBox disappear">
		<div class="alertBg">

		</div>
		<div class="alertShow">

		</div>
	</div>
	<style>
		.alertBg{
			width: 100%;
			height: 100%;
			position: absolute;
			left: 0;
			top: 0;
			background: #000;
			opacity: 0.6;
			z-index: 10;
		}
		.disappear{
			display: none;
			opacity: 0;
		}
		appear{
			display: block;
			opacity: 1;
		}
		.alertShow{
			width: 500px;
			height: 400px;
			background: #fff;
			position: fixed;
			left: 50%;
			top: 10%;
			transform: translateX(-50%);
			z-index: 15;
		}
	</style>
	<script type="text/javascript">
		var lottery={
			index:-1,	//当前转动到哪个位置，起点位置
			count:0,	//总共有多少个位置
			timer:0,	//setTimeout的ID，用clearTimeout清除
			speed:20,	//初始转动速度
			times:0,	//转动次数
			cycle:50,	//转动基本次数：即至少需要转动多少次再进入抽奖环节
			prize:-1,	//中奖位置
			init:function(id){
				if ($("#"+id).find(".lottery-unit").length>0) {
					$lottery = $("#"+id);
					$units = $lottery.find(".lottery-unit");
					// console.log(this)
					this.obj = $lottery;
					this.count = $units.length;
					$lottery.find(".lottery-unit-"+this.index).addClass("active");
				};
			},
			roll:function(){
				var index = this.index;
				var count = this.count;
				var lottery = this.obj;
				$(lottery).find(".lottery-unit-"+index).removeClass("active");
				index += 1;
				if (index>count-1) {
					index = 0;
				};
				$(lottery).find(".lottery-unit-"+index).addClass("active");
				this.index=index;
				return false;
			},
			stop:function(index){
				this.prize=index;
				return false;
			}
		};

		function roll(){
			lottery.times += 1;
			lottery.roll();
			if (lottery.times > lottery.cycle+10 && lottery.prize==lottery.index) {
				var prize_id = $("#lottery").attr("prize_id");
				var prize_name = $("#lottery").attr("prize_name");
				var prize_site = $("#lottery").attr("prize_site");
				// alert("前端中奖位置："+prize_site+"\n"+"中奖名称："+prize_name+"\n中奖id："+prize_id);
				appearAlert();
				clearTimeout(lottery.timer);
				lottery.prize = -1;
				lottery.times = 0;
				click = false;
			}else{
				if (lottery.times<lottery.cycle) {
					lottery.speed -= 10;
				}else if(lottery.times==lottery.cycle) {
					var index = Math.random()*(lottery.count)|0;
					lottery.prize = index;		
				}else{
					if (lottery.times > lottery.cycle+10 && ((lottery.prize==0 && lottery.index==7) || lottery.prize==lottery.index+1)) {
						lottery.speed += 110;
					}else{
						lottery.speed += 20;
					}
				}
				if (lottery.speed<40) {
					lottery.speed=40;
				};
				//console.log(lottery.times+'^^^^^^'+lottery.speed+'^^^^^^^'+lottery.prize);
				lottery.timer = setTimeout(roll,lottery.speed);
			}
			return false;
		}

		function appearAlert(){
			$(".alertBox").removeClass("disappear").addClass("appear");
		}
		function disappearAlert(){
			$(".alertBox").removeClass("appear").addClass("disappear");
		}

		var click=false;

		window.onload=function(){
			lottery.init('lottery');
			$("#lottery a").click(function(){
				if (click) {
					return false;
				}else{
					lottery.speed=100;
					$("#lottery").attr("prize_site", 1);
					$("#lottery").attr("prize_id", 2);    
					$("#lottery").attr("prize_name", 3);
					roll();
					click=true;
					return false;
				}
			});
		};
	</script>
</body>
</html>